{"version":3,"sources":["components/menu-list-item/index.js","components/menu-list-item/menu-list-item.js","components/resto-service-context/index.js","components/resto-service-context/resto-service-context.js","components/hoc/index.js","components/hoc/with-resto-service.js","actions/index.js","components/spinner/index.js","components/spinner/spinner.js","components/error/index.js","components/error/error.js","components/menu-list/menu-list.js","components/menu-list/index.js","components/pages/main-page.js","components/cart-table/cart-table.js","components/cart-table/index.js","components/pages/cart-page.js","components/pages/itemPage.js","components/app-header/shopping-cart-solid.svg","components/app-header/index.js","components/app-header/app-header.js","components/app/food-bg.jpg","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/resto-service.js","reducers/index.js","store.js","index.js"],"names":["MenuListItem","menuItem","onAddToCart","title","price","url","category","className","to","id","src","alt","onClick","e","preventDefault","RestoServiceContext","React","createContext","WithRestoService","Wrapped","props","Consumer","RestoService","menuLoaded","newMenu","type","payload","menuRequested","menuError","addedToCart","Spinner","Error","MenuList","this","getMenuItems","then","res","catch","menuItems","loading","error","items","map","Component","mapDispatchToProps","View","connect","state","menu","MainPage","generateOrder","item","qtty","deleteFromCart","CartTable","length","setOrder","CartPage","ItemPage","find","el","match","params","AppHeader","totalPrice","cartIcon","App","style","background","Background","path","exact","component","ErrorBoundry","setState","children","_apiBase","a","fetch","ok","status","json","getResource","console","log","order","getOrderNumber","number","newOrder","method","headers","body","JSON","stringify","orderNumber","initialState","reducer","action","itemInd","findIndex","itemInState","newItem","slice","idx","itemIndex","store","createStore","restoService","ReactDOM","render","Provider","value","document","getElementById"],"mappings":"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","file":"static/js/main.55a2062d.chunk.js","sourcesContent":["import MenuListItem from './menu-list-item';\nexport default MenuListItem;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './menu-list-item.scss';\n\n// const getCategoryImg = (category) =>{\n//     switch(category){\n//         case\n//     }\n// }\n\nconst MenuListItem = ( {menuItem, onAddToCart}) => {\n    const {title, price, url, category} = menuItem;\n    \n    return (\n        <>\n            <li className=\"menu__item\">\n                <Link to = {`/${menuItem.id}`}>\n                    <div className=\"menu__title\">{title}</div>\n                    <img className=\"menu__img\" src={url} alt={title}></img>\n                    <div className=\"menu__category\">Category: <span>{category}</span></div>\n                    <div className=\"menu__price\">Price: <span>{price}$</span></div>\n                    <button onClick = {(e) => {\n                            e.preventDefault();\n                            onAddToCart();\n                        } } \n                        className=\"menu__btn\">Add to cart</button>\n                    <span className = {`menu__category_Img ${category}`}></span>\n                </Link>\n            </li>\n        \n        </>\n    )\n}\n\n\nexport default MenuListItem;","import RestoServiceContext from './resto-service-context';\n\nexport default RestoServiceContext;","import React from 'react';\n\nconst RestoServiceContext = React.createContext(); // Создаем константу с контекстом\n\nexport default RestoServiceContext;\n","import WithRestoService from './with-resto-service';\n\nexport default WithRestoService;","import React from 'react';\nimport RestoServiceContext from '../resto-service-context';\n\nconst WithRestoService = () => (Wrapped) => { \n    return (props) => {  \n        return (\n            <RestoServiceContext.Consumer>\n                {\n                    (RestoService) => {\n                        return <Wrapped {...props} RestoService = {RestoService}/>\n                    }\n                }\n            </RestoServiceContext.Consumer>\n        )\n    }\n};\n\nexport default WithRestoService;","const menuLoaded = (newMenu) => {\n    return {\n        type: 'MENU_LOADED',\n        payload: newMenu\n    }\n}\n\nconst menuRequested = () => {\n    return {\n        type: 'MENU_REQUESTED',\n    }\n}\n\nconst menuError = () => {\n    return {\n        type: 'MENU_ERROR',\n    }\n}\n\nconst addedToCart = (id) => {\n    return {\n        type: 'ITEM_ADD_TO_CART',\n        payload: id\n    }\n}\n\nconst deleteFromCart = (id) => {\n    return {\n        type: 'ITEM_REMOVE_FROM_CART',\n        payload: id\n    }\n}\n\nexport {\n    menuLoaded,\n    menuRequested,\n    menuError, \n    addedToCart, \n    deleteFromCart\n};","import Spinner from './spinner';\n\nexport default Spinner;","import React from 'react';\n\nconst Spinner = () => {\n    return <div className=\"spinner\">loading...</div>\n}\n\nexport default Spinner;","import Error from './error';\n\nexport default Error;","import React from 'react';\n\nconst Error = () => {\n    return <div className=\"error\">Error</div>\n}\n\nexport default Error;","import React, {Component} from 'react';\nimport MenuListItem from '../menu-list-item';\nimport { connect } from 'react-redux';\nimport WithRestoService from '../hoc';\nimport {menuLoaded, menuRequested, menuError, addedToCart} from '../../actions';\nimport Spinner from '../spinner';\nimport Error from '../error';\n\nimport './menu-list.scss';\n\nclass MenuList extends Component {\n\n    componentDidMount() {\n        this.props.menuRequested();\n\n        const {RestoService} = this.props;\n        RestoService.getMenuItems()\n            .then(res => this.props.menuLoaded(res))\n            .catch(() => this.props.menuError());\n    }\n\n    render() {\n        const {menuItems, loading, error, addedToCart} = this.props;\n        if (error){\n            return <Error/>\n        }\n        if (loading) {\n            return <Spinner/>\n        }\n        const items = menuItems.map(menuItem => {\n                return ( <MenuListItem \n                            key = {menuItem.id} \n                            menuItem = {menuItem }\n                            onAddToCart = {() => addedToCart(menuItem.id)}/>\n                )\n            })\n\n        return (\n            <View items = {items}/> \n            )\n    }\n};\n\nconst mapStateToProps =  (state) =>{\n    return {\n        menuItems: state.menu,\n        loading: state.loading,\n        error: state.error\n    }\n}\n\n\nconst mapDispatchToProps = {\n    menuLoaded: menuLoaded,\n    menuRequested,\n    menuError,\n    addedToCart\n}\n\n\nconst View = ({items}) => {\n\n    return (\n        <ul className=\"menu__list\">\n            {items}\n        </ul>\n    ) \n}\n\nexport default WithRestoService ()( connect(mapStateToProps, mapDispatchToProps)(MenuList) );\n","import MenuList from './menu-list';\nexport default MenuList;","import React from 'react';\nimport MenuList from '../menu-list';\n\nconst MainPage = () => {\n    return (\n        <MenuList/>\n    )\n}\n\nexport default MainPage;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {deleteFromCart} from '../../actions';\nimport WithRestoService from '../hoc';\n\nimport './cart-table.scss';\n\nconst CartTable = ({items, deleteFromCart, RestoService}) => {\n    if( items.length === 0){\n        return (<div className=\"cart__title\"> Ваша корзина пуста :( </div>)\n    }\n    return (\n        <>\n            <div className=\"cart__title\">Ваш заказ:</div>\n            <div className=\"cart__list\">\n            {\n                items.map( item => {\n                    const {price, title, url, id, qtty} = item;\n                    return (\n                        <div key = {id} className=\"cart__item\">\n                            <img src={url} className=\"cart__item-img\" alt={title}></img>\n                            <div className=\"cart__item-title\">{title}</div>\n                            <div className=\"cart__item-price\">{price}$ * {qtty}</div>\n                            <div onClick = {() => deleteFromCart(id)}className=\"cart__close\">&times;</div>\n                        </div>\n                    );\n                })\n            }\n            </div>\n            <button onClick = {() => {RestoService.setOrder( generateOrder(items))} } className = \"order\">Оформить заказ</button>\n        </>\n    );\n};\n\nconst generateOrder = (items) => {\n    const newOrder = items.map(item => {\n        return {\n            id: item.id,\n            qtty: item.qtty\n        }\n    })\n    return newOrder;\n}\n\nconst mapStateToProps = ({items}) => {\n    return{\n        items \n    }\n};\n\nconst mapDispatchToProps = {\n    deleteFromCart\n}\n\nexport default WithRestoService()(connect(mapStateToProps, mapDispatchToProps)(CartTable));","import CartTable from './cart-table';\n\nexport default CartTable;","import React from 'react';\nimport CartTable from '../cart-table';\n\nconst CartPage = () => {\n    return (\n        <div className=\"cart\"> \n            <CartTable/>\n        </div>\n    )\n}\n\nexport default CartPage;","import React, {Component} from 'react';\nimport { connect } from 'react-redux';\nimport WithRestoService from '../hoc/';\nimport Spinner from '../spinner';\nimport Error from '../error';\nimport {menuLoaded, menuRequested, menuError, addedToCart} from '../../actions';\n\nimport './itemPage.css';\n\n\n\nclass ItemPage extends Component {\n\n    componentDidMount() {\n        if( this.props.menuItems.length === 0){\n            this.props.menuRequested();\n\n            const {RestoService} = this.props;\n            RestoService.getMenuItems()\n                .then(res => this.props.menuLoaded(res))\n                .catch(error => this.props.menuError());\n        }\n    }\n\n    render() {\n        const {loading, error, menuItems} = this.props;\n        if(error) {\n            return (\n                <div className = \"item_page\">\n                    <Error/>\n                </div>\n            )\n        }\n        if(loading) {\n            return (\n                <div className = \"item_page\">\n                    <Spinner/>\n                </div>\n            )\n        }\n        const item = menuItems.find(el => +el.id === +this.props.match.params.id)\n        const{title, url, category, price, id} = item;\n        //console.log(this.props.menuItems)\n\n\n        return (\n            <div className = \"item_page\">\n                <div className=\"menu__item item_block\">\n                     <div className=\"menu__title\">{title}</div>\n                    <img className=\"menu__img\" src={url} alt={title}></img>\n                    <div className=\"menu__category\">Category: <span>{category}</span></div>\n                    <div className=\"menu__price\">Price: <span>{price}$</span></div>\n                    <button onClick = {()=>this.props.addedToCart(id)} className=\"menu__btn\">Add to cart</button>\n                    <span className = {`menu__category_Img ${category}`}></span> \n                </div>\n            </div>\n        );\n    }\n}\n\n\n\n\nconst mapStateToProps =  (state) =>{\n    return {\n        menuItems: state.menu,\n        loading: state.loading,\n        error: state.error\n    }\n}\n\n\nconst mapDispatchToProps = {\n    menuLoaded: menuLoaded,\n    menuRequested,\n    menuError,\n    addedToCart\n}\n\n\nexport default WithRestoService ()( connect(mapStateToProps, mapDispatchToProps)(ItemPage) );","export default __webpack_public_path__ + \"static/media/shopping-cart-solid.f0d47d21.svg\";","import AppHeader from './app-header';\n\nexport default AppHeader;","import React from 'react';\nimport cartIcon from './shopping-cart-solid.svg';\nimport './app-header.scss';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst AppHeader = ({totalPrice}) => {\n\n    return (\n        <header className=\"header\">\n            <Link to ={'/'} className = \"header__link\">Menu</Link>\n            <Link to = \"/cart\" className = \"header__link\">\n                <img className=\"header__cart\" src={cartIcon} alt=\"cart\"></img>\n                Total: {totalPrice} $\n            </Link>\n        </header>\n    )\n};\n\nconst mapStateToProps = ({totalPrice}) => {\n    return{\n        totalPrice\n    }\n}\n\nexport default connect(mapStateToProps)(AppHeader);","export default __webpack_public_path__ + \"static/media/food-bg.fd26761e.jpg\";","import App from './app';\n\nexport default App;","import React from 'react';\nimport {MainPage, CartPage, ItemPage} from '../pages';\nimport AppHeader from '../app-header';\n\nimport Background from './food-bg.jpg';\nimport { Route, Switch } from 'react-router-dom';\n\nconst App = () => {\n\n    return (\n        <div style={{background: `url(${Background}) center center/cover no-repeat`}} className=\"app\">\n            <AppHeader/>\n            <Switch>\n                <Route path = '/' exact component={MainPage}/>\n                <Route path = '/cart' exact component={CartPage}/>\n                <Route path = '/:id'  component={ItemPage}/>\n            </Switch>\n        </div>\n    )\n}\nexport default App;","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;","import React, {Component} from 'react';\nimport Error from '../error';\n\nexport default class ErrorBoundry extends Component {\n\n    state = {\n        error: false\n    }\n\n    componentDidCatch() {\n        this.setState({error: true})\n    }\n\n    render() {\n        if(this.state.error) {\n            return <Error/>\n        }\n\n        return this.props.children;\n    }\n}","export default class RestoService{\n    _apiBase = 'http://localhost:3000';\n\n    async getResource(url) {\n        const res = await fetch(`${this._apiBase}${url}`);\n        if (!res.ok) {\n            throw new Error(`Could not fetch ${url}` + \n                `, received ${res.status}`);\n        }\n        return await res.json();\n    }\n\n    async getMenuItems () {\n        return await this.getResource('/menu/');\n    }\n\n    async getItem(id) {\n        const res = await this.getResource('/menu/');\n        console.log(res);\n        const item = res.find( (el) => {\n            console.log(`el.id: ${el.id}, id: ${id}`);\n            return el.id === +id;\n        }) \n        console.log(item);\n        return item;\n    }\n\n    async setOrder(order) {\n        const number = await this.getOrderNumber();\n        const newOrder = {\n            id: number,\n            order: order\n        }\n        const response = await fetch(`${this._apiBase}/orders`, {\n            method: 'POST', \n            headers: {\n                'Content-Type': 'application/json;charset=utf-8'\n            },\n            body: JSON.stringify(newOrder)\n        });\n        if (!response.ok){\n            throw new Error('json error'); \n        }\n    }\n\n    async getOrderNumber(){\n        const res = await this.getResource('/orders/');\n        const orderNumber = res.length+1;\n\n        return orderNumber\n    }\n}","// параметр по умолчанию\nconst initialState = {\n    menu: [],\n    loading: true,\n    error: false,\n    items: [],\n    totalPrice: 0\n}\n\n\nconst reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case 'MENU_LOADED':\n            return {\n                ...state,\n                menu: action.payload,\n                loading: false,\n                error: false\n            };\n        case 'MENU_REQUESTED':\n            return {\n                ...state,\n                menu: state.menu,\n                loading: true,\n                error: false\n            };\n        case 'MENU_ERROR':\n            return {\n                ...state,\n                menu: state.menu,\n                error: true\n            };\n        case 'ITEM_ADD_TO_CART':\n            const id = action.payload;\n            \n            const itemInd = state.items.findIndex(item => item.id === id);\n            if (itemInd >= 0){\n                const itemInState = state.items.find(item => item.id === id);\n                const newItem = {\n                    ...itemInState,\n                    qtty: ++itemInState.qtty\n                }\n                return {\n                    ...state, \n                    items: [\n                        ...state.items.slice(0, itemInd),\n                        newItem,\n                        ...state.items.slice(itemInd + 1)\n                    ],\n                    totalPrice: state.totalPrice + newItem.price\n                }\n\n            } \n            // товара раньше не было в корзине\n            const item = state.menu.find(item => item.id === id);\n            const newItem = {\n                title: item.title,\n                price: item.price,\n                url: item.url,\n                id: item.id,\n                qtty: 1\n            };\n            \n            return {\n                ...state,\n                items: [\n                    ...state.items,\n                    newItem\n                ],\n                totalPrice: state.totalPrice + newItem.price\n            };\n\n        case 'ITEM_REMOVE_FROM_CART':\n            const idx = action.payload;\n            const itemIndex = state.items.findIndex(item => item.id === idx)\n            const price = state.items[itemIndex]['price'] * state.items[itemIndex]['qtty'];\n            return {\n                ...state, \n                items: [\n                    ...state.items.slice(0, itemIndex),\n                    ...state.items.slice(itemIndex + 1)\n                ], \n                totalPrice: state.totalPrice - price\n            }\n        default: \n            return state;\n    }\n}\n\nexport default reducer;","import { createStore } from 'redux';\nimport reducer from './reducers';\n\nconst store = createStore(reducer);\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport ErrorBoundry from './components/error-boundry';\nimport RestoService from './services/resto-service';\nimport RestoServiceContext from './components/resto-service-context';\nimport store from './store';\n\nimport './index.scss';\n\n\nconst restoService = new RestoService();\n\nReactDOM.render(\n    <Provider store={store}>\n        <ErrorBoundry>\n            <RestoServiceContext.Provider value={restoService}>\n                <Router>\n                    <App/>\n                </Router>\n            </RestoServiceContext.Provider>\n        </ErrorBoundry>\n    </Provider>\n    , document.getElementById('root')\n);\n\n"],"sourceRoot":""}